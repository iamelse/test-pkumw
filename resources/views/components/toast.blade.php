@props([
    'type' => 'success', // success | error | warning | info
    'message' => '',
    'position' => 'top-6 inset-x-0 flex justify-center',
    'duration' => 4000, // ms
])

@php
    $styles = [
        'success' => [
            'bg'   => 'bg-success-50 dark:bg-success-500/[0.15]',
            'text' => 'text-success-600 dark:text-success-500',
            'bar'  => 'bg-success-500',
            'icon' => '<svg class="fill-current" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path 
                          fill-rule="evenodd" 
                          clip-rule="evenodd" 
                          d="M3.55078 12C3.55078 7.33417 7.3332 3.55176 11.999 3.55176C16.6649 3.55176 20.4473 7.33417 20.4473 12C20.4473 16.6659 16.6649 20.4483 11.999 20.4483C7.3332 20.4483 3.55078 16.6659 3.55078 12ZM11.999 2.05176C6.50477 2.05176 2.05078 6.50574 2.05078 12C2.05078 17.4943 6.50477 21.9483 11.999 21.9483C17.4933 21.9483 21.9473 17.4943 21.9473 12C21.9473 6.50574 17.4933 2.05176 11.999 2.05176ZM15.5126 10.6333C15.8055 10.3405 15.8055 9.86558 15.5126 9.57269C15.2197 9.27979 14.7448 9.27979 14.4519 9.57269L11.1883 12.8364L9.54616 11.1942C9.25327 10.9014 8.7784 10.9014 8.4855 11.1942C8.19261 11.4871 8.19261 11.962 8.4855 12.2549L10.6579 14.4273C10.7986 14.568 10.9894 14.647 11.1883 14.647C11.3872 14.647 11.578 14.568 11.7186 14.4273L15.5126 10.6333Z" 
                          fill=""
                        ></path>
                      </svg>',
        ],
        'error' => [
            'bg'   => 'bg-error-50 dark:bg-error-500/[0.15]',
            'text' => 'text-error-600 dark:text-error-500',
            'bar'  => 'bg-error-500',
            'icon' => '<svg class="fill-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.12454 4.53906L15.8736 4.53906C16.1416 4.53906 16.3892 4.68201 16.5231 4.91406L20.3977 11.625C20.5317 11.857 20.5317 12.1429 20.3977 12.375L16.5231 19.0859C16.3892 19.3179 16.1416 19.4609 15.8736 19.4609H8.12454C7.85659 19.4609 7.609 19.3179 7.47502 19.0859L3.60048 12.375C3.46651 12.1429 3.46651 11.857 3.60048 11.625L7.47502 4.91406C7.609 4.68201 7.85659 4.53906 8.12454 4.53906ZM15.8736 3.03906H8.12454C7.3207 3.03906 6.57791 3.46791 6.17599 4.16406L2.30144 10.875C1.89952 11.5711 1.89952 12.4288 2.30144 13.125L6.17599 19.8359C6.57791 20.532 7.32069 20.9609 8.12454 20.9609H15.8736C16.6775 20.9609 17.4203 20.532 17.8222 19.8359L21.6967 13.125C22.0987 12.4288 22.0987 11.5711 21.6967 10.875L17.8222 4.16406C17.4203 3.46791 16.6775 3.03906 15.8736 3.03906ZM12.0007 7.81075C12.4149 7.81075 12.7507 8.14653 12.7507 8.56075V12.7803C12.7507 13.1945 12.4149 13.5303 12.0007 13.5303C11.5865 13.5303 11.2507 13.1945 11.2507 12.7803V8.56075C11.2507 8.14653 11.5865 7.81075 12.0007 7.81075ZM10.9998 15.3303C10.9998 14.778 11.4475 14.3303 11.9998 14.3303H12.0005C12.5528 14.3303 13.0005 14.778 13.0005 15.3303C13.0005 15.8826 12.5528 16.3303 12.0005 16.3303H11.9998C11.4475 16.3303 10.9998 15.8826 10.9998 15.3303Z" fill=""></path>
                      </svg>',
        ],
        'warning' => [
            'bg'   => 'bg-warning-50 dark:bg-warning-500/[0.15]',
            'text' => 'text-warning-600 dark:text-warning-500',
            'bar'  => 'bg-warning-500',
            'icon' => '<svg class="fill-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M13.9497 3.875C13.0836 2.375 10.9186 2.375 10.0525 3.875L2.54699 16.875C1.68096 18.375 2.76349 20.25 4.49554 20.25H19.5067C21.2387 20.25 22.3212 18.375 21.4552 16.875L13.9497 3.875ZM11.3516 4.625C11.6403 4.125 12.3619 4.125 12.6506 4.625L20.1562 17.625C20.4448 18.125 20.084 18.75 19.5067 18.75H4.49554C3.91819 18.75 3.55735 18.125 3.84603 17.625L11.3516 4.625ZM12.0018 8.56075C12.416 8.56075 12.7518 8.89653 12.7518 9.31075V13.5303C12.7518 13.9445 12.416 14.2803 12.0018 14.2803C11.5876 14.2803 11.2518 13.9445 11.2518 13.5303V9.31075C11.2518 8.89653 11.5876 8.56075 12.0018 8.56075ZM11.0009 16.0803C11.0009 15.528 11.4486 15.0803 12.0009 15.0803H12.0016C12.5539 15.0803 13.0016 15.528 13.0016 16.0803C13.0016 16.6326 12.5539 17.0803 12.0016 17.0803H12.0009C11.4486 17.0803 11.0009 16.6326 11.0009 16.0803Z" fill=""></path>
                        </svg>',
        ],
        'info' => [
            'bg'   => 'bg-blue-50 dark:bg-blue-500/[0.15]',
            'text' => 'text-blue-600 dark:text-blue-500',
            'bar'  => 'bg-blue-500',
            'icon' => '<svg class="fill-current" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 12C3.5 7.30558 7.30558 3.5 12 3.5C16.6944 3.5 20.5 7.30558 20.5 12C20.5 16.6944 16.6944 20.5 12 20.5C7.30558 20.5 3.5 16.6944 3.5 12ZM12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM10.9991 7.52507C10.9991 8.07736 11.4468 8.52507 11.9991 8.52507H12.0001C12.5524 8.52507 13.0001 8.07736 13.0001 7.52507C13.0001 6.97279 12.5524 6.52507 12.0001 6.52507H11.9991C11.4468 6.52507 10.9991 6.97279 10.9991 7.52507ZM12.0001 17.3714C11.5859 17.3714 11.2501 17.0356 11.2501 16.6214V10.9449C11.2501 10.5307 11.5859 10.1949 12.0001 10.1949C12.4143 10.1949 12.7501 10.5307 12.7501 10.9449V16.6214C12.7501 17.0356 12.4143 17.3714 12.0001 17.3714Z" fill=""></path>
                        </svg>',
        ],
    ];

    $style = $styles[$type];
@endphp

<div 
    x-data="{ show: true, progress: 100 }"
    x-init="
        let interval = setInterval(() => { 
            progress -= 1; 
            if(progress <= 0) clearInterval(interval);
        }, {{ $duration / 100 }});
        setTimeout(() => show = false, {{ $duration }});
    "
    x-show="show"
    x-transition.opacity.duration.500ms
    class="fixed {{ $position }} z-50"
>
    <div class="w-full sm:max-w-[340px] rounded-md bg-white shadow-theme-sm dark:bg-[#1E2634]">

        <!-- Content -->
        <div class="flex items-center justify-between gap-3 p-3">

            <!-- Icon + Text -->
            <div class="flex items-center gap-4">
                <div class="flex h-10 w-10 items-center justify-center rounded-lg {{ $style['text'] }} {{ $style['bg'] }}">
                    <svg class="fill-current" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        {!! $style['icon'] !!}
                    </svg>
                </div>

                <h4 class="sm:text-base text-sm text-gray-800 dark:text-white/90">
                    {{ $message }}
                </h4>
            </div>

            <!-- Close Button -->
            <button 
                @click="show = false" 
                class="text-gray-400 hover:text-gray-800 dark:hover:text-white/90"
            >
                <svg class="fill-current" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.04 16.54c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.54 4.55c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.55-4.54c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L12 10.59 7.46 6.04c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12l-4.55 4.54Z" />
                </svg>
            </button>

        </div>

        <!-- Timebar -->
        <div class="h-1 bg-gray-200 dark:bg-gray-700">
            <div 
                class="h-1 {{ $style['bar'] }}"
                :style="`width: ${progress}%; transition: width {{ $duration / 1000 / 100 }}s linear;`"
            ></div>
        </div>

    </div>
</div>